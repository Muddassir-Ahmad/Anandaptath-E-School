<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Class 3 - Bangla Quiz - Anandapath</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="index.html">আনন্দপাঠ</a>
  </nav>

  <!-- Quiz Container -->
  <div class="container quiz-container">
    
    <!-- Start Screen -->
    <div id="start-screen" class="text-center my-5">
      <button id="startBtn" class="btn btn-success btn-lg">Start Quiz</button>
    </div>

    <!-- Quiz Interface -->
    <div id="quizBox" style="display: none;">
      <div class="card no-hover-effect">
        <div class="card-body">
          <h4 class="card-title text-center mb-4">Class 3 Bangla Quiz</h4>

          <!-- Timer -->
          <div id="timer-container">
            <div id="timer">Time Left: 20:00</div>
            <div id="timer-bar"></div>
          </div>

          <!-- Question Area -->
          <p class="question-header">Question <span id="current-question">1</span> of <span id="total-questions">0</span></p>
          <p class="question" id="question">Loading question...</p>
          <ul class="options" id="options"></ul>

          <!-- Control Buttons -->
          <button id="checkAnswer" class="btn btn-primary btn-check-answer" disabled>Check</button>
          <button id="nextQuestion" class="btn btn-secondary btn-next-question" style="display:none;">Next Question</button>
          <div id="result" class="result"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    const questions = [
      {
        question: "দেওয়ানী কার্যবিধি আইনের কার্যকর করা হয় কত সালে?",
        options: ["১৮৫৯ সালে", "১৯০৯ সালে", "১৯০৮ সালে", "১৮৮৭ সালে"],
        correct: 2
      },
      {
        question: "বাংলাদেশের জাতীয় ফুল কোনটি?",
        options: ["গোলাপ", "শাপলা", "সূর্যমুখী", "জুঁই"],
        correct: 1
      }
    ];

    let totalTime = 1200; // 20 minutes
    let timeLeft = totalTime;
    let timer;
    let currentQuestionIndex = 0;
    let score = 0;

    const startBtn = document.getElementById('startBtn');
    const quizBox = document.getElementById('quizBox');
    const startScreen = document.getElementById('start-screen');

    const questionElement = document.getElementById('question');
    const optionsElement = document.getElementById('options');
    const checkAnswerButton = document.getElementById('checkAnswer');
    const nextQuestionButton = document.getElementById('nextQuestion');
    const resultElement = document.getElementById('result');
    const currentQuestionCounter = document.getElementById('current-question');
    const totalQuestionsElement = document.getElementById('total-questions');
    const timerElement = document.getElementById('timer');
    const timerBar = document.getElementById('timer-bar');

    // Start Quiz
    startBtn.addEventListener('click', () => {
      startScreen.style.display = 'none';
      quizBox.style.display = 'block';
      startQuiz();
    });

    function loadQuestion() {
      const current = questions[currentQuestionIndex];
      questionElement.textContent = current.question;
      currentQuestionCounter.textContent = currentQuestionIndex + 1;
      totalQuestionsElement.textContent = questions.length;
      optionsElement.innerHTML = '';
      resultElement.textContent = '';
      checkAnswerButton.disabled = true;
      checkAnswerButton.style.display = 'inline-block';
      nextQuestionButton.style.display = 'none';

      current.options.forEach((opt, index) => {
        const li = document.createElement('li');
        const input = document.createElement('input');
        const label = document.createElement('label');
        input.type = 'radio';
        input.name = 'option';
        input.value = index;
        input.id = `option-${index}`;
        label.htmlFor = `option-${index}`;
        label.textContent = opt;
        li.appendChild(input);
        li.appendChild(label);
        optionsElement.appendChild(li);
      });

      document.querySelectorAll('input[name="option"]').forEach(radio => {
        radio.addEventListener('change', () => checkAnswerButton.disabled = false);
      });
    }

    function checkAnswer() {
      const selectedOption = document.querySelector('input[name="option"]:checked');
      if (!selectedOption) return;

      const selectedIndex = parseInt(selectedOption.value);
      const correctIndex = questions[currentQuestionIndex].correct;
      const liElements = optionsElement.querySelectorAll('li');

      liElements.forEach((li, index) => {
        if (index === correctIndex) li.classList.add('correct-answer');
        if (index === selectedIndex && selectedIndex !== correctIndex) li.classList.add('incorrect-answer');
      });

      if (selectedIndex === correctIndex) {
        resultElement.textContent = 'Correct!';
        score++;
      } else {
        resultElement.textContent = `Incorrect! Correct answer: ${questions[currentQuestionIndex].options[correctIndex]}`;
      }

      checkAnswerButton.style.display = 'none';
      nextQuestionButton.style.display = 'inline-block';
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex < questions.length) {
        loadQuestion();
      } else {
        finishQuiz();
      }
    }

    function updateTimer() {
      const min = Math.floor(timeLeft / 60);
      const sec = timeLeft % 60;
      timerElement.textContent = `Time Left: ${min}:${sec < 10 ? '0' + sec : sec}`;
      timerBar.style.width = (timeLeft / totalTime) * 100 + '%';

      timeLeft--;
      if (timeLeft < 0) {
        clearInterval(timer);
        finishQuiz();
      }
    }

    function finishQuiz() {
      clearInterval(timer);
      const total = questions.length;
      window.location.href = `score.html?score=${score}&total=${total}`;
    }

    function startQuiz() {
      loadQuestion();
      timer = setInterval(updateTimer, 1000);
    }

    checkAnswerButton.addEventListener('click', checkAnswer);
    nextQuestionButton.addEventListener('click', nextQuestion);
  </script>

</body>
</html>
